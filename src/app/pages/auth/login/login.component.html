<navbar></navbar>
<section class="container text-center pb-5">
  <div class="py-2 mt-5 d-none d-sm-block"></div>

  <h2 class="display-4 mb-4 mt-5">Login</h2>

  <form
    #f="ngForm"
    [formGroup]="form"
    (ngSubmit)="login()">
    <input
      value="username"
      type="hidden"
      #loginWith>

    <div class="form-group">
      <mat-form-field appearance="outline">
        <mat-label for="email">Email</mat-label>
        <input
          formControlName="email"
          id="email"
          type="email"
          autocomplete="email"
          matInput>
        <mat-error *ngIf="email.errors?.pattern">Email is invalid.</mat-error>
      </mat-form-field>
    </div>
    <div class="form-group">
      <mat-form-field appearance="outline">
        <mat-label for="password">Password</mat-label>
        <input formControlName="password"
          id="password" type="password" autocomplete="current-password" matInput>
        <mat-error *ngIf="password.errors">Password is required.</mat-error>
      </mat-form-field>
    </div>

    <div *ngIf="shouldVerify">
      <hr>
  
      <div class="form-group">
        <mat-form-field appearance="outline">
          <mat-label for="code">2FA Code</mat-label>
          <mat-hint>Check your email.</mat-hint>
          <input formControlName="code"
            id="code" type="text" autocomplete="code" matInput>
          <mat-error *ngIf="form.get('code').errors">code is required.</mat-error>
        </mat-form-field>
      </div>
    </div>

    <button
      [disabled]="processing"
      class="bg-primary mb-2"
      type="submit"
      mat-button>
      <span
        *ngIf="processing"
        class="spinner-border spinner-border-sm"
        role="status"
        aria-hidden="true"></span>
      Login
    </button>
    <div><a
      matTooltip="Fill in your email first."
      (click)="forgotPassword()"
      [class.text-muted]="email.invalid">Forgot Password?</a></div>
    <div>Or <a
      [routerLink]="['/sign-up']"
      [queryParams]="{ redirect: redirect }">create an account</a>.</div>
  </form>
</section>