<div
  #menuTrigger="matMenuTrigger"
  [matMenuTriggerFor]="channelMenu"
  (contextmenu)="openMenu($event, menuTrigger)">
  <div *ngIf="channel.type === 'TEXT'">
    <a (click)="$event.stopPropagation()"
      [routerLink]="'/channels/' + guild._id + '/' + channel._id"
      routerLinkActive="active"
      class="nav-item nav-link">        
      <span class="float-right text-muted p-1">
        <i *ngIf="pings.isUnread(channel._id)"
          matTooltip="Unread Pings"
          class="fas fa-circle"></i>
      </span>
    
      <i class="fas fa-hashtag pr-1"
        [ngClass]="{
          'text-muted': usersService.user.ignored.channelIds.includes(channel._id),
          'text-warning': pings.isUnread(channel._id)
        }"></i>
      <span>{{ channel.name }}</span>
      <span *ngIf="pings.isUnread(channel._id)" class="ml-2">
        <i class="fas fa-circle text-danger"></i>
      </span>
    
      <span class="float-right">
        <i matTooltip="Edit Channel"
          class="fas fa-cog text-muted channel-settings spin"></i>
      </span>
    </a>
  </div>
    
  <div *ngIf="channel.type === 'VOICE'">
    <voice-channel
      (click)="$event.stopPropagation()"
      [channel]="channel"
      [guild]="guild"></voice-channel>
  </div>
</div>

<mat-menu
  #channelMenu="matMenu"
  matMenuContent>
  <div (click)="$event.stopPropagation()"
    class="p-2">
    <button
      (click)="delete()"
      class="text-danger"
      mat-button>
      <i class="fas fa-trash" aria-hidden="true"></i>
      <span class="ml-2">Delete</span>
    </button>
    <hr>
    <div>
      <strong>ID: </strong>
      <code>{{ channel._id }}</code>
    </div>
  </div>
</mat-menu>
