<div
  *ngIf="perms.can(guild._id, 'VIEW_CHANNELS')"
  #menuTrigger="matMenuTrigger"
  [matMenuTriggerFor]="channelMenu"
  (contextmenu)="openMenu($event, menuTrigger)">
  <div *ngIf="channel.type === 'TEXT'">
    <a (click)="$event.stopPropagation()"
      class="nav-item nav-link"
      [routerLink]="'/channels/' + guild._id + '/' + channel._id"
      routerLinkActive="active">    
      <i class="fas fa-hashtag text-muted pr-1"></i>
      <span>{{ channel.name }}</span>

      <span
        *ngIf="isUnread"
        matTooltip="Unread"
        class="mr-2 float-right">
        <i class="lni lni-alarm text-danger"></i>
      </span>
    </a>
  </div>
    
  <div *ngIf="channel.type === 'VOICE'">
    <voice-channel
      (click)="$event.stopPropagation()"
      [channel]="channel"
      [guild]="guild"></voice-channel>
  </div>
</div>

<mat-menu
  #channelMenu="matMenu"
  matMenuContent>
  <h6 class="p-2 text-center">#{{ channel.name }}</h6>

  <div (click)="$event.stopPropagation()">
    <button
      *ngIf="perms.can(guild._id, 'MANAGE_CHANNELS')"
      (click)="delete()"
      class="text-danger"
      mat-menu-item>
      <i class="lni lni-trash" aria-hidden="true"></i>
      <span class="ml-2">Delete</span>
    </button>
    
    <hr>
    <div class="p-2">
      <i class="lni lni-dev"></i>
      <code> {{ channel._id }}</code>
    </div>
  </div>
</mat-menu>
